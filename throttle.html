<!--
@license
Copyright (c) 2017 The StartPolymer Project Authors. All rights reserved.
This code may only be used under the MIT License found at https://github.com/StartPolymer/license
The complete set of authors may be found at https://github.com/StartPolymer/authors
The complete set of contributors may be found at https://github.com/StartPolymer/contributors
-->

<script>
(function() {
  'use strict';

  /**
   * @summary Throttle methods.
   * @memberof S
   */
  class Throttler {
    /**
     * Throttle a callback using requestAnimationFrame. For mouse, resize, scroll events.
     * Example: addEventListener('resize', S.Throttler.throttleRaf(_onOptimizedResize), false);
     */
    static throttleRaf(callback, scope = this) {
      let requestId;

      const later = (scope, args) => () => {
        requestId = null;
        callback.apply(scope, args);
      }

      const throttled = function(...args) {
        if ((requestId === null) || (requestId === undefined)) {
          requestId = requestAnimationFrame(later(scope, args));
        }
      }

      throttled.cancel = () =>
        cancelAnimationFrame(requestId);

      return throttled;
    }
  }

  window.S = window.S || {};
  S.Throttler = Throttler;

})();
</script>
